const express = require('express');
const router = express.Router();
const nodemailer = require('nodemailer');
const shordid = require('shortid')
const config = require('../config/config')

router.post("/mailSender", (req, res) => {
    let email = req.body.email;

    let transporter = nodemailer.createTransport({
        service: 'gmail',
        auth: {
            user: config.gmail.id,
            pass: config.gmail.pwd
        }
    });

    let mailOptions = {
        from: config.gmail.id,
        to: email,
        subject: 'Mailer Test',
        html: `
        <!DOCTYPE html>
        <html lang=en>
       
        <head>
            <meta charset="utf-8">
            <title>PPCWIZ password Reset</title>
        </head>
        <tr>
            <table style="margin: 0 auto; color: #595959;">
                <td width="260" valign="top">
                    <tr>
                        <td style=" background-color: #dff2ff; box-shadow: 0 4px 4px -4px #c1c1c1;">
                            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i66CI7J207Ja0XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNzUgMjUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDc1IDI1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCgkuc3Qxe2ZpbGw6I0FFRDlGRjt9DQoJLnN0MntmaWxsOiMzOUI0RjE7fQ0KCS5zdDN7ZmlsbDojM0RBM0ZGO3N0cm9rZTojM0RBM0ZGO3N0cm9rZS13aWR0aDoxLjU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQ0KPC9zdHlsZT4NCjxnPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTgzLjQtNDUuNGg1YzMuNSwwLDYuMSwxLjIsNi4xLDQuOGMwLDMuNS0yLjYsNS4xLTYsNS4xaC0yLjN2NS44aC0yLjhWLTQ1LjR6IE0tMTc4LjYtMzcuNw0KCQljMi4zLDAsMy41LTAuOSwzLjUtMi45cy0xLjItMi42LTMuNi0yLjZoLTEuOXY1LjVILTE3OC42eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTY5LjQtNDUuNGg1YzMuNSwwLDYuMSwxLjIsNi4xLDQuOGMwLDMuNS0yLjYsNS4xLTYsNS4xaC0yLjN2NS44aC0yLjhWLTQ1LjR6IE0tMTY0LjYtMzcuNw0KCQljMi4zLDAsMy41LTAuOSwzLjUtMi45cy0xLjItMi42LTMuNi0yLjZoLTEuOXY1LjVILTE2NC42eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTU2LjItMzcuNWMwLTUuMSwzLjItOC4yLDcuMi04LjJjMiwwLDMuNSwwLjksNC41LDJsLTEuNSwxLjhjLTAuOC0wLjgtMS43LTEuNC0zLTEuNA0KCQljLTIuNiwwLTQuNCwyLjItNC40LDUuN2MwLDMuNiwxLjcsNS44LDQuMyw1LjhjMS40LDAsMi41LTAuNiwzLjQtMS42bDEuNSwxLjdjLTEuMywxLjUtMi45LDIuMy01LDIuMw0KCQlDLTE1My4xLTI5LjQtMTU2LjItMzIuMy0xNTYuMi0zNy41eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTQzLjItNDUuNGgyLjlsMS40LDcuOWMwLjMsMS43LDAuNSwzLjMsMC44LDVoMC4xYzAuMy0xLjcsMC43LTMuNCwxLTVsMS45LTcuOWgyLjRsMS45LDcuOQ0KCQljMC4zLDEuNiwwLjcsMy4zLDEsNWgwLjFjMC4zLTEuNywwLjUtMy40LDAuOC01bDEuNC03LjloMi43bC0zLDE1LjdoLTMuNWwtMi04LjNjLTAuMy0xLjItMC41LTIuNC0wLjctMy42aC0wLjENCgkJYy0wLjIsMS4yLTAuNSwyLjQtMC43LDMuNmwtMS45LDguM2gtMy40TC0xNDMuMi00NS40eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTIyLjQtNDUuNGgyLjh2MTUuN2gtMi44Vi00NS40eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTE2LjctMzEuNGw3LjYtMTEuN2gtNi45di0yLjNoMTAuM3YxLjdsLTcuNiwxMS43aDcuN3YyLjNoLTExLjFWLTMxLjR6Ii8+DQo8L2c+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTIuNy05NS4yYy0wLjIsMC0wLjgsMC4yLTEuNSwwLjRMNTAtOTQuNGwtMC42LTAuNGMtMi4zLTEuMi01LjEsMC4yLTUuNSwyLjljLTAuMSwwLjcsMC4yLDEuOCwwLjYsMi40DQoJbDAuMiwwLjNsMS45LTAuOWMyLjEtMSw0LjMtMi4zLDQuNC0yLjZjMC0wLjEtMC4xLTAuNC0wLjItMC42bC0wLjItMC40aDAuOGMwLjksMC4xLDEsMC4yLDAuMywwLjdjLTAuNCwwLjMtMC40LDAuNC0wLjMsMC44DQoJYzAuMSwwLjMsMC4xLDAuNywwLDFsLTAuMSwwLjZsMC40LTAuMmMwLjctMC40LDEuOC0xLjMsMi4zLTEuOGMxLTEsMS0yLjEtMC4xLTIuNUM1My40LTk1LjMsNTMuMy05NS40LDUyLjctOTUuMnoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik00OS45LTg5LjhjLTEsMC41LTIuNCwwLjktMy44LDEuM2wtMC42LDAuMmwwLjYsMC4zYzEuMiwwLjYsMywwLjIsNC0wLjdjMC41LTAuNSwxLTEuMiwwLjktMS40DQoJQzUxLjEtOTAuMiw1MC42LTkwLDQ5LjktODkuOHoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00My4zLTg4LjdjLTAuNiwwLjItMSwwLjMtMSwwLjJzLTAuMS0wLjEtMC4yLDBjLTAuMiwwLjMsMC4yLDAuNCwxLjcsMC4ybDEuNS0wLjJMNDUtODguNw0KCUM0NC43LTg5LjEsNDQuNi04OS4xLDQzLjMtODguN3oiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMTAtODUuNmMtNC43LDAuNi04LjQsMy44LTkuNyw4LjRjLTEuNSw1LjItMC4yLDExLDMuMiwxNC4yYzEuOCwxLjgsMy43LDIuNSw2LjgsMi44YzUsMC41LDkuMS0xLjUsMTEtNS40DQoJYzEuMy0yLjUsMS4yLTQuNS0wLjItNS44Yy0xLjMtMS4yLTMuNy0xLTQuNywwLjNjLTAuMiwwLjMtMC42LDEtMC44LDEuNUMtNS02OC4yLTUuNi02Ny40LTYuNS02N2MtMC43LDAuMy0wLjksMC40LTEuOSwwLjQNCgljLTAuOSwwLTEuMy0wLjEtMS44LTAuM2MtMS45LTAuOC0yLjctMi43LTIuNy02LjFjMC0zLjMsMC45LTUuNCwyLjgtNi4zYzAuNS0wLjMsMC45LTAuMywxLjgtMC4zYzEuMSwwLDEuMiwwLDEuOSwwLjQNCglzMS4yLDEsMi40LDIuOGMwLjgsMS40LDEuNCwxLjcsMi44LDEuN2MxLDAuMSwxLjEsMCwxLjctMC4zYzEuMy0wLjcsMS43LTEuNiwxLjctMy4zYy0wLjEtMS0wLjEtMS4yLTAuNi0yLjMNCgljLTEuMi0yLjUtNC00LjUtNy4xLTUuMkMtNi44LTg1LjctOC45LTg1LjgtMTAtODUuNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03LTg1LjNjLTEsMC40LTEuNiwxLTIuMSwxLjljLTAuNywxLjUtMC43LDEuNSwyLjUsMTEuMWMxLjUsNC41LDMsOC42LDMuMiw5LjFjMC41LDEuMSwxLjIsMS44LDIsMi4zDQoJYzAuNiwwLjMsMC45LDAuNCwxLjksMC40YzEuNSwwLjEsMi40LTAuMiwzLjItMC45YzEtMC45LDEuNi0yLjIsMi44LTYuN2MwLjYtMi4xLDEuMS0zLjcsMS4yLTMuN2MwLjEsMC4xLDAuNiwxLjgsMS4yLDQNCglzMS4zLDQuMiwxLjUsNC43YzAuOCwxLjcsMi4yLDIuNywzLjgsMi43YzEuMiwwLDIuMS0wLjQsMi45LTEuM2MwLjMtMC40LDMuNi00LjMsNy4yLTguN2w2LjYtOGgyLjRoMi40bC0wLjIsMC4zDQoJYy0zLjYsNC04LjQsOS42LTksMTAuMmMtMS4xLDEuNC0xLjQsMi0xLjQsMy4yYzAsMS42LDAuNywyLjgsMi4xLDMuNWwwLjcsMC40aDljOC44LDAsOSwwLDkuNi0wLjNjMS4zLTAuNiwyLTEuNywyLTMuMg0KCXMtMC43LTIuNy0yLjEtMy4zYy0wLjYtMC4zLTAuOC0wLjMtNS4xLTAuM2MtMi40LDAtNC40LTAuMS00LjQtMC4xczEuOS0yLjMsNC4zLTQuOWM1LjQtNi4xLDUuMi01LjksNS42LTYuOA0KCWMwLjMtMC42LDAuMy0wLjksMC4zLTEuOWMwLTAuOS0wLjEtMS4zLTAuMy0xLjdjLTAuNC0wLjctMS0xLjMtMS45LTEuNmwtMC44LTAuM2gtOC4zYy04LjMsMC04LjMsMC04LjksMC4zYy0wLjcsMC40LTEuMiwxLTYuNyw3LjYNCgljLTIuNywzLjMtNC45LDYtNC45LDZzLTAuNy0yLjQtMS41LTUuMmMtMS43LTUuOS0xLjktNi41LTIuNS03LjJjLTEtMS4zLTIuMy0xLjgtNC0xLjdjLTEuNiwwLjEtMi45LDAuOS0zLjYsMi4zDQoJYy0wLjMsMC41LTEuMSwzLjEtMi4yLDcuMmMtMC40LDEuMy0wLjcsMi40LTAuOCwyLjNTMTQtNzUuNywxMy40LTc4Yy0xLjMtNC42LTEuOS01LjktMi42LTYuNkM5LjktODUuNSw4LjItODUuNyw3LTg1LjN6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNLTYwLjYtODUuMmMtMC44LDAuMi0xLjgsMC44LTIuMSwxLjJjLTAuMSwwLjItMC40LDAuNi0wLjUsMWMtMC40LDAuNS0wLjQsMC41LTAuNCw5LjdjMCw2LjMsMCw5LjQsMC4xLDEwDQoJYzAuMywyLDEuNiwzLjIsMy42LDMuMmMxLjQsMCwyLjUtMC42LDMuMS0xLjljMC4zLTAuNywwLjMtMC43LDAuNC0zLjl2LTMuMmwyLjYtMC4xYzIuMS0wLjEsMi44LTAuMSwzLjctMC4zYzQtMSw2LjEtMy43LDYuMS03LjgNCgljMC00LTIuMi02LjktNi03LjhjLTAuOC0wLjItMS44LTAuMi01LjYtMC4zQy01OC04NS4zLTYwLjMtODUuMy02MC42LTg1LjJ6IE0tNTIuMS03OC45YzAuNiwwLjIsMC45LDAuOCwwLjksMS43DQoJYzAsMS40LTAuOCwxLjktMy41LDJoLTEuNnYtMnYtMmwxLjksMC4xQy01My40LTc5LjEtNTIuNC03OS01Mi4xLTc4Ljl6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNLTM4LjUtODUuMmMtMS4zLDAuMy0yLjQsMS4yLTIuNywyLjRjLTAuMSwwLjQtMC4yLDIuNy0wLjIsMTAuMmMwLDguOSwwLDkuNywwLjIsMTAuM2MwLjUsMS40LDEuOCwyLjMsMy4zLDIuMw0KCXMyLjYtMC43LDMuMi0yYzAuNC0wLjcsMC40LTAuNywwLjQtMy45bDAuMS0zLjFoMmMyLjQsMCwzLjYtMC4yLDUuMS0wLjZjMi4xLTAuNywzLjYtMS45LDQuNC0zLjdjMC42LTEuMywwLjgtMi4xLDAuOC00DQoJYzAtMS41LTAuMS0xLjgtMC40LTIuN2MtMC41LTEuMy0wLjktMi4xLTEuOC0yLjljLTEuMy0xLjMtMi44LTEuOS01LjItMi4yQy0zMC44LTg1LjQtMzcuNy04NS40LTM4LjUtODUuMnogTS0zMC03OC44DQoJYzAuNiwwLjMsMC44LDAuNywwLjgsMS42cy0wLjIsMS40LTAuOCwxLjZjLTAuNSwwLjMtMi41LDAuNS0zLjUsMC40aC0wLjd2LTJ2LTJoMS45Qy0zMC43LTc5LjEtMzAuNC03OS4xLTMwLTc4Ljh6Ii8+DQo8Zz4NCgk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNODguMi00MS45aC0yLjN2My41YzAsMC41LTAuMSwwLjktMC40LDEuMWMtMC4yLDAuMy0wLjUsMC40LTAuOSwwLjRzLTAuNy0wLjEtMC45LTAuNA0KCQljLTAuMi0wLjMtMC4zLTAuNi0wLjMtMS4xdi05LjVjMC0wLjUsMC4xLTAuOSwwLjQtMS4yYzAuMy0wLjIsMC42LTAuNCwxLjItMC40aDMuMmMwLjksMCwxLjcsMC4xLDIuMiwwLjJjMC40LDAuMiwwLjksMC41LDEuMiwwLjgNCgkJYzAuNCwwLjMsMC42LDAuNywwLjgsMS4yYzAuMiwwLjUsMC4zLDEsMC4zLDEuNmMwLDEuMi0wLjQsMi4yLTEuMiwyLjhDOTAuOC00Mi4yLDg5LjctNDEuOSw4OC4yLTQxLjl6IE04Ny42LTQ3LjZoLTEuN3YzLjhoMS43DQoJCWMwLjYsMCwxLjEtMC4xLDEuNS0wLjJjMC40LTAuMSwwLjctMC4zLDAuOS0wLjZjMC4yLTAuMywwLjMtMC42LDAuMy0xLjFzLTAuMi0xLTAuNS0xLjNDODkuNC00Ny40LDg4LjctNDcuNiw4Ny42LTQ3LjZ6Ii8+DQoJPHBhdGggY2xhc3M9InN0MiIgZD0iTTEwMC42LTQxLjloLTIuM3YzLjVjMCwwLjUtMC4xLDAuOS0wLjQsMS4xYy0wLjIsMC4zLTAuNSwwLjQtMC45LDAuNHMtMC43LTAuMS0wLjktMC40cy0wLjMtMC42LTAuMy0xLjF2LTkuNQ0KCQljMC0wLjUsMC4xLTAuOSwwLjQtMS4yYzAuMy0wLjIsMC42LTAuNCwxLjItMC40aDMuMmMwLjksMCwxLjcsMC4xLDIuMiwwLjJjMC41LDAuMiwwLjksMC41LDEuMywwLjhjMC4zLDAuMywwLjYsMC43LDAuOCwxLjINCgkJYzAuMiwwLjUsMC4zLDEsMC4zLDEuNmMwLDEuMi0wLjQsMi4yLTEuMiwyLjhDMTAzLjMtNDIuMiwxMDIuMS00MS45LDEwMC42LTQxLjl6IE0xMDAtNDcuNmgtMS43djMuOGgxLjdjMC42LDAsMS4xLTAuMSwxLjUtMC4yDQoJCWMwLjQtMC4xLDAuNy0wLjMsMC45LTAuNmMwLjItMC4zLDAuMy0wLjYsMC4zLTEuMXMtMC4yLTEtMC41LTEuM0MxMDEuOC00Ny40LDEwMS4xLTQ3LjYsMTAwLTQ3LjZ6Ii8+DQoJPHBhdGggY2xhc3M9InN0MiIgZD0iTTExOC43LTQxYzAsMC40LTAuMSwwLjgtMC4zLDEuM2MtMC4yLDAuNS0wLjUsMC45LTAuOSwxLjNjLTAuNCwwLjQtMC45LDAuOC0xLjYsMS4xYy0wLjYsMC4zLTEuNCwwLjQtMi4yLDAuNA0KCQljLTAuNiwwLTEuMi0wLjEtMS44LTAuMmMtMC41LTAuMS0xLTAuMy0xLjQtMC42cy0wLjgtMC42LTEuMi0xYy0wLjMtMC40LTAuNi0wLjgtMC44LTEuM2MtMC4yLTAuNS0wLjQtMS0wLjUtMS41cy0wLjItMS4xLTAuMi0xLjcNCgkJYzAtMSwwLjEtMS45LDAuNC0yLjZjMC4zLTAuOCwwLjctMS40LDEuMi0yYzAuNS0wLjYsMS4yLTEsMS45LTEuM2MwLjctMC4zLDEuNS0wLjQsMi4zLTAuNGMxLDAsMS45LDAuMiwyLjYsMC42DQoJCWMwLjgsMC40LDEuNCwwLjksMS44LDEuNWMwLjUsMC40LDAuNywxLDAuNywxLjVjMCwwLjMtMC4xLDAuNS0wLjMsMC44Yy0wLjIsMC4xLTAuNCwwLjMtMC43LDAuM2MtMC4zLDAtMC42LTAuMS0wLjctMC4yDQoJCWMtMC4yLTAuMi0wLjMtMC40LTAuNS0wLjhjLTAuMy0wLjYtMC43LTEuMS0xLjEtMS40Yy0wLjQtMC4zLTEtMC41LTEuNi0wLjVjLTEsMC0xLjgsMC40LTIuNCwxLjJzLTAuOSwxLjktMC45LDMuMw0KCQljMCwxLDAuMSwxLjcsMC40LDIuNGMwLjMsMC42LDAuNiwxLjEsMS4xLDEuNHMxLjEsMC41LDEuNywwLjVjMC43LDAsMS4zLTAuMiwxLjgtMC41YzAuNS0wLjQsMC45LTAuOSwxLjEtMS42DQoJCWMwLjEtMC4zLDAuMi0wLjYsMC40LTAuOGMwLjItMC4yLDAuNC0wLjMsMC44LTAuM2MwLjMsMCwwLjUsMC4xLDAuOCwwLjNDMTE4LjYtNDEuNiwxMTguNy00MS40LDExOC43LTQxeiIvPg0KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xMzAuNy0zOWwtMi03LjNsLTIsNy4zYy0wLjIsMC42LTAuMywxLTAuNCwxLjJjLTAuMSwwLjItMC4zLDAuNS0wLjUsMC43Yy0wLjIsMC4yLTAuNSwwLjMtMC45LDAuMw0KCQljLTAuMywwLTAuNi0wLjEtMC44LTAuMmMtMC4yLTAuMS0wLjQtMC4zLTAuNS0wLjVzLTAuMi0wLjUtMC4zLTAuN2MtMC4xLTAuMy0wLjEtMC42LTAuMi0wLjhsLTItOC4yYy0wLjEtMC41LTAuMi0wLjgtMC4yLTEuMQ0KCQljMC0wLjMsMC4xLTAuNiwwLjMtMC44YzAuMi0wLjIsMC41LTAuMywwLjgtMC4zYzAuNSwwLDAuOCwwLjEsMC45LDAuNGMwLjIsMC4zLDAuMywwLjcsMC40LDEuM2wxLjYsNy4ybDEuOC02LjcNCgkJYzAuMS0wLjUsMC4zLTAuOSwwLjQtMS4yczAuMy0wLjUsMC41LTAuN2MwLjItMC4yLDAuNi0wLjMsMS0wLjNjMC40LDAsMC43LDAuMSwxLDAuM2MwLjIsMC4yLDAuNCwwLjQsMC41LDAuNw0KCQljMC4xLDAuMiwwLjIsMC42LDAuNCwxLjJsMS44LDYuN2wxLjYtNy4yYzAuMS0wLjQsMC4yLTAuNywwLjItMC45YzAuMS0wLjIsMC4yLTAuNCwwLjQtMC42YzAuMi0wLjIsMC40LTAuMywwLjctMC4zDQoJCXMwLjYsMC4xLDAuOCwwLjNjMC4yLDAuMiwwLjMsMC41LDAuMywwLjhjMCwwLjItMC4xLDAuNi0wLjIsMS4xbC0yLDguMmMtMC4xLDAuNi0wLjMsMS0wLjMsMS4yYy0wLjEsMC4zLTAuMiwwLjUtMC41LDAuNw0KCQljLTAuMiwwLjItMC41LDAuMy0wLjksMC4zYy0wLjQsMC0wLjctMC4xLTAuOS0wLjNjLTAuMi0wLjItMC40LTAuNC0wLjUtMC42QzEzMS0zOCwxMzAuOS0zOC41LDEzMC43LTM5eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xMzkuMi0zOC41di05LjZjMC0wLjUsMC4xLTAuOSwwLjMtMS4xYzAuMi0wLjMsMC41LTAuNCwwLjktMC40YzAuNCwwLDAuNywwLjEsMC45LDAuNA0KCQljMC4zLDAuMiwwLjQsMC42LDAuNCwxLjF2OS42YzAsMC41LTAuMSwwLjktMC4zLDEuMWMtMC4yLDAuMy0wLjUsMC40LTAuOSwwLjRjLTAuNCwwLTAuNy0wLjEtMC45LTAuNA0KCQlDMTM5LjMtMzcuNSwxMzkuMi0zOCwxMzkuMi0zOC41eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xNDUuMi00MGw2LjMtNy41aC01LjRjLTAuNCwwLTAuNy0wLjEtMC45LTAuM2MtMC4yLTAuMi0wLjMtMC40LTAuMy0wLjdzMC4xLTAuNSwwLjMtMC43DQoJCWMwLjItMC4yLDAuNS0wLjMsMC45LTAuM2g3YzAuOSwwLDEuNCwwLjQsMS40LDEuM2MwLDAuNC0wLjEsMC43LTAuMiwxYy0wLjIsMC4yLTAuNSwwLjYtMC45LDEuMmwtNS45LDdoNi41YzAuNCwwLDAuNywwLjEsMC45LDAuMg0KCQljMC4yLDAuMiwwLjMsMC40LDAuMywwLjdjMCwwLjMtMC4xLDAuNS0wLjMsMC43Yy0wLjIsMC4yLTAuNSwwLjMtMC45LDAuM2gtOGMtMC41LDAtMC45LTAuMS0xLjItMC40Yy0wLjMtMC4yLTAuNC0wLjYtMC40LTENCgkJYzAtMC4xLDAtMC4zLDAuMS0wLjRjMC0wLjEsMC4xLTAuMiwwLjItMC4zYzAuMS0wLjEsMC4yLTAuMiwwLjMtMC40QzE0NS0zOS44LDE0NS4xLTM5LjksMTQ1LjItNDB6Ii8+DQo8L2c+DQo8Zz4NCgk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNOC43LDE0LjZoLTJ2My4xYzAsMC40LTAuMSwwLjgtMC4zLDFzLTAuNSwwLjMtMC44LDAuM2MtMC4zLDAtMC42LTAuMS0wLjgtMC4zYy0wLjItMC4yLTAuMy0wLjYtMC4zLTFWOS4zDQoJCWMwLTAuNSwwLjEtMC44LDAuMy0xLjFzMC42LTAuMywxLjEtMC4zaDIuOWMwLjgsMCwxLjUsMC4xLDIsMC4yYzAuNSwwLjEsMC44LDAuMywxLjIsMC42YzAuMywwLjMsMC42LDAuNiwwLjcsMS4xDQoJCWMwLjIsMC40LDAuMywwLjksMC4zLDEuNGMwLDEuMS0wLjMsMi0xLDIuNkMxMS4xLDE0LjQsMTAsMTQuNiw4LjcsMTQuNnogTTguMSw5LjZINi42VjEzaDEuNWMwLjUsMCwxLTAuMSwxLjMtMC4yDQoJCWMwLjQtMC4xLDAuNi0wLjMsMC44LTAuNXMwLjMtMC42LDAuMy0xYzAtMC41LTAuMS0wLjktMC40LTEuMkM5LjgsOS43LDkuMSw5LjYsOC4xLDkuNnoiLz4NCgk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNMjAuMiwxNC42aC0ydjMuMWMwLDAuNC0wLjEsMC44LTAuMywxcy0wLjUsMC4zLTAuOCwwLjNjLTAuMywwLTAuNi0wLjEtMC44LTAuM2MtMC4yLTAuMi0wLjMtMC42LTAuMy0xVjkuMw0KCQljMC0wLjUsMC4xLTAuOCwwLjMtMS4xczAuNi0wLjMsMS4xLTAuM2gyLjljMC44LDAsMS41LDAuMSwyLDAuMmMwLjUsMC4xLDAuOCwwLjMsMS4yLDAuNnMwLjYsMC42LDAuOCwxLjFjMC4yLDAuNCwwLjMsMC45LDAuMywxLjQNCgkJYzAsMS4xLTAuMywyLTEsMi42QzIyLjYsMTQuNCwyMS42LDE0LjYsMjAuMiwxNC42eiBNMTkuNiw5LjZoLTEuNVYxM2gxLjVjMC41LDAsMS0wLjEsMS4zLTAuMmMwLjQtMC4xLDAuNi0wLjMsMC44LTAuNQ0KCQlzMC4zLTAuNiwwLjMtMWMwLTAuNS0wLjEtMC45LTAuNC0xLjJDMjEuMyw5LjcsMjAuNiw5LjYsMTkuNiw5LjZ6Ii8+DQoJPHBhdGggY2xhc3M9InN0MyIgZD0iTTM2LjgsMTUuNWMwLDAuNC0wLjEsMC43LTAuMywxLjFjLTAuMiwwLjQtMC40LDAuOC0wLjgsMS4yYy0wLjQsMC40LTAuOCwwLjctMS40LDFzLTEuMiwwLjQtMiwwLjQNCgkJYy0wLjYsMC0xLjEtMC4xLTEuNi0wLjJjLTAuNS0wLjEtMC45LTAuMy0xLjMtMC41Yy0wLjQtMC4yLTAuNy0wLjUtMS4xLTAuOWMtMC4zLTAuMy0wLjUtMC43LTAuNy0xLjJjLTAuMi0wLjQtMC40LTAuOS0wLjUtMS40DQoJCUMyNywxNC41LDI3LDE0LDI3LDEzLjRjMC0wLjksMC4xLTEuNywwLjQtMi40YzAuMy0wLjcsMC42LTEuMywxLjEtMS44YzAuNS0wLjUsMS0wLjksMS43LTEuMWMwLjYtMC4zLDEuMy0wLjQsMi4xLTAuNA0KCQljMC45LDAsMS43LDAuMiwyLjQsMC41YzAuNywwLjQsMS4yLDAuOCwxLjYsMS4zYzAuNCwwLjUsMC42LDEsMC42LDEuNWMwLDAuMy0wLjEsMC41LTAuMywwLjdjLTAuMiwwLjItMC40LDAuMy0wLjcsMC4zDQoJCWMtMC4zLDAtMC41LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMy0wLjQtMC41LTAuN2MtMC4zLTAuNS0wLjYtMS0xLTEuMmMtMC40LTAuMy0wLjktMC40LTEuNS0wLjRjLTAuOSwwLTEuNywwLjMtMi4yLDENCgkJYy0wLjUsMC43LTAuOCwxLjctMC44LDNjMCwwLjksMC4xLDEuNiwwLjQsMi4xYzAuMiwwLjYsMC42LDEsMSwxLjNjMC40LDAuMywxLDAuNCwxLjYsMC40YzAuNiwwLDEuMi0wLjIsMS42LTAuNQ0KCQljMC40LTAuMywwLjgtMC44LDEtMS40YzAuMS0wLjMsMC4yLTAuNSwwLjQtMC43YzAuMS0wLjIsMC40LTAuMywwLjctMC4zYzAuMywwLDAuNSwwLjEsMC43LDAuM1MzNi44LDE1LjIsMzYuOCwxNS41eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik00Ny45LDE3LjJsLTEuOC02LjZsLTEuOCw2LjZjLTAuMSwwLjUtMC4zLDAuOS0wLjMsMS4xYy0wLjEsMC4yLTAuMiwwLjQtMC40LDAuNmMtMC4yLDAuMi0wLjUsMC4zLTAuOCwwLjMNCgkJYy0wLjMsMC0wLjUtMC4xLTAuNy0wLjJjLTAuMi0wLjEtMC4zLTAuMi0wLjQtMC40Yy0wLjEtMC4yLTAuMi0wLjQtMC4zLTAuN2MtMC4xLTAuMy0wLjEtMC41LTAuMi0wLjdsLTEuOC03LjQNCgkJYy0wLjEtMC40LTAuMi0wLjgtMC4yLTFjMC0wLjMsMC4xLTAuNSwwLjMtMC43YzAuMi0wLjIsMC40LTAuMywwLjctMC4zYzAuNCwwLDAuNywwLjEsMC44LDAuNGMwLjEsMC4zLDAuMywwLjYsMC40LDEuMWwxLjQsNi40DQoJCWwxLjYtNmMwLjEtMC41LDAuMi0wLjgsMC4zLTEuMUM0NC45LDguNCw0NSw4LjIsNDUuMiw4YzAuMi0wLjIsMC41LTAuMywwLjktMC4zYzAuNCwwLDAuNywwLjEsMC45LDAuM3MwLjQsMC40LDAuNCwwLjYNCgkJYzAuMSwwLjIsMC4yLDAuNiwwLjMsMS4xbDEuNiw2bDEuNC02LjRDNTAuOSw4LjksNTEsOC42LDUxLDguNWMwLjEtMC4yLDAuMi0wLjQsMC4zLTAuNWMwLjItMC4yLDAuNC0wLjIsMC43LTAuMnMwLjUsMC4xLDAuNywwLjMNCgkJYzAuMiwwLjIsMC4zLDAuNCwwLjMsMC43YzAsMC4yLTAuMSwwLjUtMC4yLDFMNTEsMTcuMmMtMC4xLDAuNS0wLjIsMC45LTAuMywxLjFzLTAuMiwwLjQtMC40LDAuNmMtMC4yLDAuMi0wLjUsMC4zLTAuOCwwLjMNCgkJYy0wLjMsMC0wLjYtMC4xLTAuOC0wLjNjLTAuMi0wLjItMC4zLTAuNC0wLjQtMC42QzQ4LjEsMTguMSw0OCwxNy43LDQ3LjksMTcuMnoiLz4NCgk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNNTUuOSwxNy44VjkuMWMwLTAuNSwwLjEtMC44LDAuMy0xYzAuMi0wLjIsMC41LTAuMywwLjgtMC4zYzAuMywwLDAuNiwwLjEsMC44LDAuM2MwLjIsMC4yLDAuMywwLjYsMC4zLDF2OC43DQoJCWMwLDAuNS0wLjEsMC44LTAuMywxcy0wLjUsMC4zLTAuOCwwLjNjLTAuMywwLTAuNi0wLjEtMC44LTAuM1M1NS45LDE4LjIsNTUuOSwxNy44eiIvPg0KCTxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik02MS41LDE2LjRsNS43LTYuOGgtNC45Yy0wLjMsMC0wLjYtMC4xLTAuOC0wLjJjLTAuMi0wLjItMC4zLTAuMy0wLjMtMC42YzAtMC4zLDAuMS0wLjUsMC4zLTAuNg0KCQlzMC40LTAuMiwwLjgtMC4yaDYuM2MwLjgsMCwxLjIsMC40LDEuMiwxLjFjMCwwLjQtMC4xLDAuNi0wLjIsMC45Yy0wLjEsMC4yLTAuNCwwLjYtMC44LDFsLTUuMyw2LjNoNS44YzAuMywwLDAuNiwwLjEsMC44LDAuMg0KCQljMC4yLDAuMSwwLjMsMC4zLDAuMywwLjZjMCwwLjMtMC4xLDAuNS0wLjMsMC42Yy0wLjIsMC4yLTAuNCwwLjItMC44LDAuMmgtNy4yYy0wLjUsMC0wLjktMC4xLTEuMS0wLjNjLTAuMi0wLjItMC40LTAuNS0wLjQtMC45DQoJCWMwLTAuMSwwLTAuMiwwLjEtMC4zczAuMS0wLjIsMC4yLTAuM3MwLjItMC4yLDAuMy0wLjRDNjEuMywxNi42LDYxLjQsMTYuNSw2MS41LDE2LjR6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==" alt="" width="17%" height="120" style="display: block; margin-left: 50px" />
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: center;">
                            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i66CI7J207Ja0XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNjQgNjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY0IDY0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCgkuc3Qxe2ZpbGw6IzcxQzJGRjt9DQoJLnN0MntmaWxsOiM0NDRCNTQ7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MywyYy0xMC41LDAtMTksOC41LTE5LDE5czguNSwxOSwxOSwxOXMxOS04LjUsMTktMTlTNTMuNSwyLDQzLDJ6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMsMTZjLTIuOCwwLTUsMi4yLTUsNXMyLjIsNSw1LDVzNS0yLjIsNS01UzQ1LjgsMTYsNDMsMTZ6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjYuNiwyNy40TDMyLDMydjEwSDIydjEwSDEydjEwSDJWNTJMMjYuNiwyNy40eiIvPg0KPHBhdGggY2xhc3M9InN0MiIgZD0iTTQzLDQxLjVjLTExLjMsMC0yMC41LTkuMi0yMC41LTIwLjVTMzEuNywwLjUsNDMsMC41UzYzLjUsOS43LDYzLjUsMjFTNTQuMyw0MS41LDQzLDQxLjV6IE00MywzLjUNCgljLTkuNywwLTE3LjUsNy45LTE3LjUsMTcuNVMzMy4zLDM4LjUsNDMsMzguNVM2MC41LDMwLjYsNjAuNSwyMVM1Mi43LDMuNSw0MywzLjV6Ii8+DQo8cGF0aCBjbGFzcz0ic3QyIiBkPSJNMTIsNjMuNUgyYy0wLjksMC0xLjUtMC43LTEuNS0xLjVWNTJjMC0wLjQsMC4xLTAuOCwwLjQtMWwxOS4xLTE5LjFjMC42LTAuNiwxLjUtMC42LDIuMSwwDQoJYzAuNiwwLjYsMC42LDEuNiwwLDIuMUwzLjUsNTIuNnY3LjloN1Y1MmMwLTAuOCwwLjYtMS41LDEuNS0xLjVoOC41VjQyYzAtMC44LDAuNi0xLjUsMS41LTEuNWg4LjVjMC45LDAsMS41LDAuNywxLjUsMS41DQoJcy0wLjYsMS41LTEuNSwxLjVoLTdWNTJjMCwwLjgtMC42LDEuNS0xLjUsMS41aC04LjVWNjJDMTMuNSw2Mi44LDEyLjksNjMuNSwxMiw2My41eiIvPg0KPC9zdmc+DQo=" width="15%" ; style="padding: 80px 0 80px 0" ;>
                            <div>
                            </div>
                            <div style="display: inline-block;">
                            <h1>${email} test!!!</h1>
                                <h2 style="font-size: 20px;">PPCWIZ Temporary Password</h2>
                                <div style="margin: 40px; color: #595959; font-size: 13px; line-height: 2;">
                                    Hello.
                                    Your PPCWIZ account change request has been received.<br>
                                    To complete the request, Please login with your temporary password.<br>
                                    <div style="padding: 50px;">
                                        <div style="background-color: #ffffe1; display: table; width: 200px; margin: 0 auto; padding: 12px; border-radius: 10px; border: 2px solid #7d7d7d; box-shadow: 2px 2px 2px #e0e0e0; font-weight: 600; font-size: 14px;">
                                            a12bcqs3
                                        </div>
                                    </div>
                                    You need to update password because this is temporary password.<br>
                                    We will always do our best.<br>
                                    <div style="font-size: 12px; margin-top: 30px; ">
                                        This mail is a service notification mail.<br>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                <td>
                    <div style="text-align: center; background: #dff2ff; padding: 12px;">
                        <p style="font-size: 12px; letter-spacing: 0.02rem;"><strong>ⓒ PPCWIZ, </strong> Inc. 2019. We love our users !</p>
                    </div>
                </td>
            </table>
        `
    };

    transporter.sendMail(mailOptions, (err, info) => {
        if (err) {
            console.log(err);
        } else {
            console.log('Email sent: ' + info.response);
        }
    });
    res.redirect("/");
});

router.get('/auth', (req, res) => {
    console.log(req.query.email);
    console.log(req.query.token);
    res.redirect('/');
})

module.exports = router;